# 推荐系统使用说明

## 📋 系统概述

这是一个一层关系推荐系统，允许管理员在后台为团队长创建固定的推荐URL，用户通过URL连接钱包即可确认加入团队。

## 🎯 核心功能

### 1. 后台管理（管理员使用）

**访问地址**: http://localhost:3000/admin

**登录信息**:
- 测试邮箱: admin@example.com
- 测试密码: admin123

**功能**:
- 🔐 管理员邮箱登录
- ✅ 创建团队（只需输入团队名称）
- ✅ 自动生成推荐链接
- ✅ 一键复制推荐链接
- ✅ 管理团队列表
- ✅ 删除团队

**操作步骤**:
1. 访问后台管理页面
2. 使用管理员邮箱和密码登录
3. 输入团队名称（如：张三团队）
4. 可选：输入团队长钱包地址（留空则自动生成）
5. 点击"创建团队并生成推荐链接"
6. 复制生成的推荐链接
7. 将链接发送给团队长或直接分享

### 2. 用户加入（普通用户）

**访问方式**: 通过推荐链接访问

**示例链接**: 
```
http://localhost:3000?ref=0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb
```

**用户看到的内容**:
- 团队长名称（如：张三团队）
- 团队长钱包地址
- 加入提示信息

**操作步骤**:
1. 点击推荐链接打开页面
2. 查看团队信息
3. 点击"连接MetaMask钱包"
4. 在MetaMask中确认连接
5. 点击"确认绑定"
6. 完成！自动加入团队

### 3. 统计查看

**访问地址**: http://localhost:3000/stats

**可查看数据**:
- 📊 总用户数
- 👥 推荐用户数
- 🏢 团队数量
- 📋 团队分布详情
- 💼 所有用户列表（钱包地址、推荐人、团队、加入时间）

## 💡 使用场景示例

### 场景1: 创建新团队

1. 管理员访问 `/admin` 并登录（admin@example.com / admin123）
2. 输入团队名称"李四团队"
3. 点击"创建团队并生成推荐链接"
4. 复制推荐链接: `http://localhost:3000?ref=0xABCD...`
5. 发送给李四
6. 李四分享链接给团队成员
7. 成员点击链接 → 连接钱包 → 确认绑定 → 完成

### 场景2: 查看团队数据

1. 访问 `/stats` 统计页面
2. 查看"李四团队"有多少成员
3. 查看所有成员的钱包地址
4. 查看加入时间

## 🔐 数据存储

### 管理员登录状态
- 存储位置: 浏览器 localStorage
- 数据内容: 管理员邮箱

### 团队数据
- 存储位置: 浏览器 localStorage
- 数据内容: 团队名称、钱包地址、创建时间

### 用户绑定数据
- 存储位置: SQLite 数据库 (`referrals.db`)
- 数据内容: 用户钱包地址、推荐人地址、团队名称、加入时间

## 🎨 页面说明

### 主页 (/)
- 显示团队邀请信息（如果有推荐链接）
- 连接钱包功能
- 确认绑定功能
- 显示已绑定状态
- 显示团队成员（如果是团队长）

### 后台管理 (/admin)
- 管理员邮箱登录
- 创建团队（输入团队名称）
- 管理团队列表
- 生成和复制推荐链接
- 删除团队
- 退出登录

### 统计页面 (/stats)
- 总览数据卡片
- 团队分布图
- 用户详细列表
- 实时刷新功能

## ⚠️ 注意事项

1. **管理员登录**: 默认测试账号为 admin@example.com / admin123
2. **团队名称**: 每个团队名称必须唯一
3. **钱包地址**: 可选输入，留空则自动生成
4. **重复绑定**: 同一个钱包地址只能绑定一次
5. **自我推荐**: 不能推荐自己
6. **MetaMask**: 用户需要安装MetaMask浏览器插件
7. **数据持久化**: 
   - 管理员登录状态和团队数据存在浏览器localStorage
   - 用户绑定数据存在SQLite数据库
   - 清除浏览器缓存会丢失登录状态和团队数据

## 🚀 快速开始

```bash
# 1. 安装依赖
npm install

# 2. 启动后端（终端1）
npm run server

# 3. 启动前端（终端2）
npm run dev

# 4. 访问后台并登录
http://localhost:3000/admin
邮箱: admin@example.com
密码: admin123

# 5. 创建团队并复制推荐链接分享给用户
```

## 📞 技术支持

如有问题，请检查：
- ✅ 后端服务器是否运行（端口3001）
- ✅ 前端服务器是否运行（端口3000）
- ✅ MetaMask是否已安装
- ✅ 钱包地址格式是否正确
